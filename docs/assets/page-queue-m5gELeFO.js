import{d,r as f,c as a,a as n,b as o,F as g,f as v,e as I,t as c,n as y,k as m,i as q,_ as w,w as _,j as k,u as U}from"./index-CO4fXZPx.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";class x{items=[];enqueue(t){this.items.push(t)}dequeue(){return this.items.shift()}peek(){return this.items[0]}isEmpty(){return this.items.length===0}size(){return this.items.length}getItems(){return[...this.items]}clear(){this.items=[]}}class T extends x{isUploading=!1;onUpload;constructor(t){super(),this.onUpload=t}enqueueFile(t){const e={id:`${Date.now()}-${Math.random()}`,file:t,status:"pending",progress:0};return super.enqueue(e),this.tryUploadNext(),e}getAllItems(){return super.getItems()}tryUploadNext(){if(this.isUploading)return;const t=this.getItems().find(e=>e.status==="pending");t&&(this.isUploading=!0,t.status="uploading",this.onUpload(t,()=>{t.status="done",this.isUploading=!1,this.tryUploadNext()}))}}const F={class:"file-uploaded-queue"},$={class:"file-uploaded-queue__list"},b={class:"file-uploaded-queue__item__title"},C={key:0},N={key:1},z={key:2},Q={key:0,class:"file-uploaded-queue__item__progress"},S=d({__name:"file-uploaded-queue",setup(i){const t=f([]),e=new T((p,u)=>{let s=0;const l=setInterval(()=>{s+=10,p.progress=s,t.value=e.getAllItems(),s>=100&&(clearInterval(l),u(),t.value=e.getAllItems())},300)});function r(p){const u=p.target;if(!u.files)return;Array.from(u.files).forEach(l=>{e.enqueueFile(l)}),t.value=e.getAllItems()}return(p,u)=>(n(),a("div",F,[u[0]||(u[0]=o("h3",{class:"file-uploaded-queue__title"},"Загрузка файлов",-1)),o("input",{type:"file",multiple:"",onChange:r},null,32),o("ul",$,[(n(!0),a(g,null,v(t.value,s=>(n(),a("li",{key:s.id,class:"file-uploaded-queue__item"},[o("div",b,[o("span",null,c(s.file.name),1),o("span",null,[s.status==="pending"?(n(),a("span",C,"🕒 Ожидание")):s.status==="uploading"?(n(),a("span",N,"⬆️ Загрузка "+c(s.progress)+"%",1)):(n(),a("span",z,"✅ Загружено"))])]),s.status==="uploading"?(n(),a("div",Q,[o("div",{class:"file-uploaded-queue__item__progress-bar",style:y({width:s.progress+"%"})},null,4)])):I("",!0)]))),128))])]))}}),A=h(S,[["__scopeId","data-v-e6d899a5"]]);class B extends x{id=1;maxSize;constructor(t=3){super(),this.maxSize=t}enqueueToast(t){this.size()>=this.maxSize&&this.dequeue(),this.id++;const e={id:this.id,message:t};return this.enqueue(e),e}}const V={class:"toast-container"},E=d({__name:"toast-item",setup(i,{expose:t}){const e=new B,r=f([]);return t({showToast:u=>{e.enqueueToast(u),r.value=e.getItems(),setTimeout(()=>{e.dequeue(),r.value=e.getItems()},3e3)}}),(u,s)=>(n(),a("div",V,[(n(!0),a(g,null,v(r.value,l=>(n(),a("div",{key:l.id,class:"toast"},c(l.message)+" "+c(l.id),1))),128))]))}}),D=h(E,[["__scopeId","data-v-9b9f66b6"]]),O={class:"toast-wrapper"},j=d({__name:"toast-wrapper",setup(i){const t=f(null),e=()=>{t.value&&t.value.showToast("Это уведомление!")};return(r,p)=>(n(),a("div",O,[o("button",{class:"toast-wrapper__button",onClick:e},"Показать уведомление"),m(D,{ref_key:"toastComponent",ref:t},null,512)]))}}),L=h(j,[["__scopeId","data-v-d27dbe17"]]),M=d({__name:"view-queue",setup(i){return(t,e)=>(n(),q(w,{title:"Очередь"},{description:_(()=>e[0]||(e[0]=[k(" Очередь — это структура данных, работающая по принципу FIFO (First In, First Out), что означает, что первый добавленный элемент будет первым извлечён. ")])),cons:_(()=>e[1]||(e[1]=[o("p",null," Очереди могут стать узким местом в производительности, если элементы добавляются быстрее, чем обрабатываются. Это может привести к переполнению памяти, если не управлять размером очереди должным образом. ",-1)])),example1:_(()=>[e[2]||(e[2]=o("p",null," Очередь может быть использована для управления порядком загрузки файлов, обеспечивая их загрузку в том порядке, в котором они были добавлены. Вы можете выбрать несколько файлов (5-10 штук) и загрузить их. Не волнуйтесь — данные на самом деле никуда не загружаются. ",-1)),m(A)]),example2:_(()=>[e[3]||(e[3]=o("p",null,"Очередь может быть использована для показа уведомлений",-1)),m(L)]),_:1}))}}),H=d({__name:"page-queue",setup(i){return(t,e)=>(n(),q(U(M)))}});export{H as default};
